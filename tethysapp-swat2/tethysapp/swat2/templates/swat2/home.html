{% extends "swat2/base.html" %}
{% load tethys_gizmos %}

{% block styles %}
{{ block.super }}
<link rel="stylesheet" href="https://openlayers.org/en/v4.3.1/css/ol.css" type="text/css">
<link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker3.css" rel="stylesheet"/>
{% endblock %}

{% block global_scripts %}
{{block.super}}
<script src="https://openlayers.org/en/v4.3.1/build/ol.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/drilldown.js"></script>
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js"></script>
{% endblock %}

{% block header_buttons %}
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Help">
    <a data-toggle="modal" data-target="#help-modal"><span class="glyphicon glyphicon-question-sign"></span></a>
  </div>
{% endblock %}

{% block app_navigation_items %}
    <br>
    <h5>Select Watershed</h5>
      {%gizmo watershed_select %}
    <div id="std_view" class="btn-group" role="group">
        <a class="btn btn-success" role="button" id="std_view">
            <span class="glyphicon glyphicon-sunglasses"></span>&nbsp;&nbsp;View Summary Data</a>
    </div>
    <br>
    <h5>Toggle Layers</h5>
    <div class="basinToggle">
      <h6>Basins</h6>
        <label>
            <input id="basin_toggle_switch" type="checkbox" checked data-toggle="toggle" data-on="On" data-off="Off" data-onstyle="success" data-offstyle="danger">
        </label>
    </div>
    <h6>Supplementary Layers</h6>
    <div class="btn-group btn-group-toggle" data-toggle="buttons">
        <label class="btn btn-primary">
          <input type="radio" class="radio" name="options" id="lulcOption" autocomplete="off"> Land Use/Land Cover
        </label>
        <label class="btn btn-primary">
          <input type="radio" class="radio" name="options" id="soilOption" autocomplete="off"> Soil
        </label>
        <label class="btn btn-primary active">
          <input type="radio" class="radio" name="options" id="noneOption" autocomplete="off" checked> None
        </label>
    </div>
    <br>
    <br>
    <div id="legend_container"></div>


{% endblock %}

{% block app_content %}
        <div id="map" class="map"></div>
{% endblock %}

{# Use the after_app_content block for modals #}
{% block after_app_content %}
  <!--Data Viewer Modal-->
  <div class="modal fade" id="data-modal" tabindex="-1" role="dialog" aria-labelledby="data-modal-label">
    <div class="modal-dialog" id="data-modal role="document">
      <div class="modal-content">
        <div id="tabs" class="modal-body">
          <!-- Nav tabs -->
          <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" id="rch_link" class = "active"><a id="rch_tab_link" href="#rch_tab" aria-controls="rch_tab" role="tab" data-toggle="tab">Reach Data</a></li>
              <li role="presentation" id="sub_link"><a id="sub_tab_link" href="#sub_tab" aria-controls="sub_tab" role="tab" data-toggle="tab">Subbasin Data</a></li>
              <li role="presentation" id="hru_link"><a id="hru_tab_link" href="#hru_tab" aria-controls="hru_tab" role="tab" data-toggle="tab">HRU Data</a></li>
              <li role="presentation" id="lulc_link"><a id="lulc_tab_link" href="#lulc_tab" aria-controls="lulc_tab" role="tab" data-toggle="tab">LULC Data</a></li>
              <li role="presentation" id="soil_link"><a id="soil_tab_link" href="#soil_tab" aria-controls="soil_tab" role="tab" data-toggle="tab">Soil Data</a></li>
              <li role="presentation" id="nasaaccess_link"><a id="nasaaccess_tab_link" href="#nasaaccess_tab" aria-controls="nasaaccess_tab" role="tab" data-toggle="tab">nasaaccess</a></li>
              <li role="presentation" id="datacart_link"><a id="datacart_tab_link" href="#datacart_tab" aria-controls="datacart_tab" role="tab" data-toggle="tab">Data Cart</a></li>
          </ul>

          <!--Tab Panes-->
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="rch_tab">
              <div class="panel-body">
                <h6 id="error" class="hidden"></h6>
                <div class="left">
                    <div class="alert alert-success hidden" id="rch_save_success">
                        <strong>Success!</strong> This data has been saved to your cart.
                    </div>
                    <div class="queryItems">
                        <div id="rch_var_picker" class="var_picker">
                            {% gizmo rch_var_select %}
                        </div>
                        <div class="monthDayToggle">
                            <label>
                                <input id="toggle_switch" type="checkbox" checked data-toggle="toggle" data-on="Monthly" data-off="Daily" data-onstyle="success" data-offstyle="danger">
                            </label>
                        </div>
                        <div id="rch_date_picker" class="date_picker">
                            <div class="input-group input-daterange">
                                {% gizmo rch_start_pick %}
                                <div class="input-group-addon">to</div>
                                {% gizmo rch_end_pick %}
                            </div>
                        </div>
                    </div>
                    <br>
                    <div id="rch_chart_container" class="view_chart hidden"></div>
                    <div class="flex-container-row"><img id="view-reach-loading" class="view-file hidden" src="/static/swat/images/loader.gif" style="margin: auto"/></div>
                </div>
                <div class="right">
                  <div id="rch_map" class="rch_map"></div>
                </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="sub_tab">
              <div class="panel-body">
                <h6 id="error" class="hidden"></h6>
                <div class="left">
                    <div class="alert alert-success hidden" id="sub_save_success">
                        <strong>Success!</strong> This data has been saved to your cart.
                    </div>
                    <div class="queryItems">
                        <div id="sub_var_picker" class="var_picker">
                            {% gizmo sub_var_select %}
                        </div>
                        <div id="sub_date_picker" class="date_picker">
                            <div class="input-group input-daterange">
                                {% gizmo sub_start_pick %}
                                <div class="input-group-addon">to</div>
                                {% gizmo sub_end_pick %}
                            </div>
                        </div>
                    </div>
                    <br>
                    <div id="sub_chart_container" class="view_chart hidden"></div>
                    <div class="flex-container-row"><img id="view-sub-loading" class="view-file hidden" src="/static/swat/images/loader.gif" style="margin: auto"/></div>
                </div>
                <div class="right">
                  <div id="sub_map" class="sub_map"></div>
                </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="hru_tab">
              <div class="panel-body">
                <h6 id="error" class="hidden"></h6>
                <div class="left">
                    <h1>COMING SOON</h1>
                    <br>
                    <div id="hru_chart_container" class="view_chart hidden"></div>
                    <div class="flex-container-row"><img id="view-hru-loading" class="view-file hidden" src="/static/swat/images/loader.gif" style="margin: auto"/></div>
                </div>
                <div class="right">
                  <div id="hru_map" class="hru_map"></div>
                </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="lulc_tab">
              <div class="panel-body">
                <div id="lulc_data_container" class="lulc_data_container">
                  <div class="flex-container-row"><img id="lulc-pie-loading" class="view-file hidden" src="/static/swat/images/loader.gif" style="margin: auto"/></div>
                  <h6 id="error" class="hidden"></h6>
                  <div id="lulcPieContainer" class="view_chart hidden"></div>
                </div>
                <div id="lulc_map_container" class="lulc_map_container">
                  <div id="lulc_map" class="lulc_map"></div>
                </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="soil_tab">
              <div class="panel-body">
                <div id="soil_data_container" class="soil_data_container">
                  <div class="flex-container-row"><img id="soil-pie-loading" class="view-file hidden" src="/static/swat/images/loader.gif" style="margin: auto"/></div>
                  <h6 id="error" class="hidden"></h6>
                  <div id="soilPieContainer" class="view_chart hidden"></div>
                </div>
                <div id="soil_map_container" class="soil_map_container">
                  <div id="soil_map" class="soil_map"></div>
                </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="nasaaccess_tab">
              <div class="panel-body">
                <div id="nasaaccess_form_container" class="nasaaccess_data_container">
                  <h6><strong>Select Date Range</strong></h6>
                    <div class="input-group input-nadaterange">
                        {% gizmo na_start_pick %}
                        <div class="input-group-addon">to</div>
                        {% gizmo na_end_pick %}
                    </div>
                    <h6><strong>Select NASAaccess Functions</strong></h6>
                    <table id=nasaaccessFunctions class="table table-striped">
                        <thead>
                          <tr>
                            <th></th>
                            <th>Function</th>
                            <th>Information</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td><input class="chk" type="checkbox" value="GLDASpolyCentroid"></td>
                            <td>GLDAS Poly Centroid</td>
                            <td>Generate air temperature input files as well as air temperature stations file from NASA GLDAS remote sensing products.</td>
                          </tr>
                          <tr>
                            <td><input class="chk" type="checkbox" value="GLDASwat"></td>
                            <td>GLDAS SWAT</td>
                            <td>Generate SWAT air temperature input files as well as air temperature stations file from NASA GLDAS remote sensing products.</td>
                          </tr>
                          <tr>
                            <td><input class="chk" type="checkbox" value="GPMpolyCentroid"></td>
                            <td>GPM Poly Centroid</td>
                            <td>Generate rainfall input files as well as rain station file from NASA GPM remote sensing products.</td>
                          </tr>
                          <tr>
                            <td><input class="chk" type="checkbox" value="GPMswat"></td>
                            <td>GPM SWAT</td>
                            <td>Generate SWAT rainfall input files as well as rain stations file from NASA GPM remote sensing products.</td>
                          </tr>
                        </tbody>
                    </table>

                <br>
                <button class="btn btn-primary" id="nasaaccess">Run NASAaccess</button>
                </div>
                <div id="nasaaccess_map_container" class="nasaaccess_map_container">
                  <div id="nasaaccess_map" class="nasaaccess_map"></div>
                </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="datacart_tab">
                <div class="panel-body">
                    <div id="ts_table_container">
                        <input id="userID" class="hidden" type="text" name="userID" />
                        <h6>Timeseries data available for download</h6>
                        <table id="tsData" class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Data Type</th>
                                    <th>Parameters</th>
                                    <th>Time Step</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Stream/Basin ID</th>
                                </tr>
                            </thead>
                            <tbody id="tBodyTS">
                            </tbody>
                        </table>
                    </div>
                    <div id="spatial_table_container">
                        <h6>Spatial data available for download</h6>
                        <table id="spatialData" class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Data Type</th>
                                    <th>File Type</th>
                                    <th>Outlet Stream ID</th>
                                </tr>
                            </thead>
                            <tbody id="tBodySpatial">
                            </tbody>
                        </table>
                    </div>
                    <form class="form" method="post" enctype="multipart/form-data" action="download_files/">
                        {% csrf_token %}
                        <input id="userID" class="hidden" type="text" name="userID">
                        <input type="submit" value="Download">
                    </form>
                </div>
            </div>
          </div>


          <!--<div class="flex-container-row"><img id="view-file-loading" class="view-file hidden" src="/static/swat/images/loader.gif" style="margin: auto"/></div>-->
          <!--<h6 id="error" class="hidden"></h6>-->
          <!--<div id="container" class="view_chart hidden"></div>-->
        </div>
        <div class="modal-footer">
          <div class="data-buttons">
            <!--<div id="download_csv" class="btn-group hidden" role="group">-->
              <!--<a class="btn btn-success" role="button" id="submit-download-csv" href="{% url 'swat:download_csv' %}">-->
                <!--<span class="glyphicon glyphicon-download-alt"></span>&nbsp;&nbsp;Download .csv</a>-->
            <!--</div>-->
            <!--<div id="download_ascii" class="btn-group hidden" role="group">-->
              <!--<a class="btn btn-success" role="button" id="submit-download-ascii" href="{% url 'swat:download_ascii' %}">-->
                <!--<span class="glyphicon glyphicon-download-alt"></span>&nbsp;&nbsp;Download ASCII</a>-->
            <!--</div>-->
            <div id="rch_compute" class="btn-group" role="group">
              <a class="btn btn-primary" role="button" id="rch_compute">
                <span class="glyphicon glyphicon-sunglasses"></span>&nbsp;&nbsp;Get RCH Data</a>
            </div>
            <div id="sub_compute" class="btn-group hidden" role="group">
              <a class="btn btn-primary" role="button" id="sub_compute">
                <span class="glyphicon glyphicon-ice-lolly-tasted"></span>&nbsp;&nbsp;Get SUB Data</a>
            </div>
            <div id="hru_compute" class="btn-group hidden" role="group">
              <a class="btn btn-primary" role="button" id="hru_extract">
                <span class="glyphicon glyphicon-leaf"></span>&nbsp;&nbsp;Get HRU Data</a>
            </div>
            <div id="lulc_compute" class="btn-group hidden" role="group">
              <a class="btn btn-primary" role="button" id="lulc_comp">
                <span class="glyphicon glyphicon-tree-deciduous"></span>&nbsp;&nbsp;Compute LULC Statistics</a>
            </div>
            <div id="soil_compute" class="btn-group hidden" role="group">
              <a class="btn btn-primary" role="button" id="soil_comp">
                <span class="glyphicon glyphicon-grain"></span>&nbsp;&nbsp;Compute Soil Statistics</a>
            </div>
            <div id="saveData" class="btn-group hidden" role="group">
              <a class="btn btn-success" role="button" id="saveData">
                <span class="glyphicon glyphicon-shopping-cart"></span>&nbsp;&nbsp;Add Data to Cart</a>
            </div>
            <!--<div id="downloadData" class="btn-group hidden" role="group">-->
              <!--<a class="btn btn-primary" role="button" id="downloadData">-->
                <!--<span class="glyphicon glyphicon-download"></span>&nbsp;&nbsp;Download Data</a>-->
            <!--</div>-->
          </div>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Watershed Summary Modal -->
  <div class="modal fade" id="summary-modal" tabindex="-1" role="dialog" aria-labelledby="summary-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div id="tabs" class="modal-body">
            <!-- Nav tabs -->
              <ul class="nav nav-tabs" role="tablist">
                  <li role="presentation" id="overview_link" class = "active"><a id="overview_tab_link" href="#overview_tab" aria-controls="overview_tab" role="tab" data-toggle="tab">Overview</a></li>
                  <li role="presentation" id="annsum_link"><a id="annsum_tab_link" href="#annsum_tab" aria-controls="annsub_tab" role="tab" data-toggle="tab">Annual Summary</a></li>
                  <!--<li role="presentation" id="annsum_link"><a id="annsum_tab_link" href="#annsum_tab" aria-controls="annsub_tab" role="tab" data-toggle="tab">Annual Summary</a></li>-->
              </ul>
          </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Example Modal -->
  <div class="modal fade" id="help-modal" tabindex="-1" role="dialog" aria-labelledby="help-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h5 class="modal-title" id="help-modal-label">Example Modal</h5>
        </div>
        <div class="modal-body">
          <p>You can add custom buttons to the app header using the <code>header_buttons</code> block. Use anchor/link tags for the button and wrap it in a div with the class <code>header-button</code>. For buttons with the gliphyicons, add the <code>glyphicon-button</code> class as well.</p>
          <p>Ever have trouble using a modal in a Tethys app? Use the <code>after_app_content</code> block for modal content to allow them to function properly. See: <a href="https://getbootstrap.com/javascript/#modals">Bootstrap Modals</a></p>
          <p>Add tooltips to any element by adding the <code>data-toggle</code>, <code>data-placement</code>, and <code>title</code> attributes to the button. See: <a href="https://getbootstrap.com/javascript/#tooltips">Bootstrap Tooltips</a></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block app_actions %}

{% endblock %}